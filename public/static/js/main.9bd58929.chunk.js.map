{"version":3,"sources":["lib/auth-service.js","lib/AuthProvider.js","components/Navbar.js","pages/Signup.js","pages/Login.js","pages/Private.js","components/AnonRoute.js","components/PrivateRoute.js","App.js","index.js"],"names":["axiosRequestFunctions","this","auth","axios","create","baseURL","process","withCredentials","username","password","post","then","data","get","React","createContext","Consumer","Provider","withAuth","WrappedComponent","login","signup","user","logout","isLoggedin","props","Component","AuthProvider","state","isLoading","setState","catch","response","message","statusMessage","err","console","log","me","value","children","className","to","id","onClick","handleFormSubmit","event","preventDefault","handleChange","target","name","onSubmit","type","onChange","component","rest","render","App","exact","path","Signup","Login","Private","ReactDOM","document","getElementById"],"mappings":"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","file":"static/js/main.9bd58929.chunk.js","sourcesContent":["import axios from \"axios\";\r\n\r\nclass Auth {\r\n  constructor() {\r\n    this.auth = axios.create({\r\n      baseURL: process.env.REACT_APP_API_URI,\r\n      withCredentials: true,\r\n    });\r\n  }\r\n\r\n  signup({ username, password }) {\r\n    return this.auth\r\n      .post(\"/auth/signup\", { username, password })\r\n      .then(({ data }) => data);\r\n  }\r\n\r\n  login({ username, password }) {\r\n    return this.auth\r\n      .post(\"/auth/login\", { username, password })\r\n      .then(({ data }) => data);\r\n  }\r\n\r\n  logout() {\r\n    return this.auth.post(\"/auth/logout\", {}).then(({ data }) => data);\r\n  }\r\n\r\n  me() {\r\n    return this.auth.get(\"/auth/me\").then(({ data }) => data);\r\n  }\r\n}\r\n\r\nconst axiosRequestFunctions = new Auth();\r\n\r\nexport default axiosRequestFunctions;\r\n","import React from \"react\";\r\nimport auth from \"./auth-service\"; // Importamos funciones para llamadas axios a la API\r\nconst { Consumer, Provider } = React.createContext();\r\n\r\n// HOC para crear Consumer\r\n// el componente withAuth recibe un componente como argumento y nos devuelve un componente con el mismo componente dentro de un <Consumer /> con las propiedades user e isLoggedin (state), y los métodos login, signup y logout (this)\r\nconst withAuth = (WrappedComponent) => {\r\n  return class extends React.Component {\r\n    render() {\r\n      return (\r\n        <Consumer>\r\n          {/* El componente <Consumer> provee un callback que recibe el \"value\" con el objeto Providers */}\r\n          {({ login, signup, user, logout, isLoggedin }) => {\r\n            return (\r\n              <WrappedComponent\r\n                login={login}\r\n                signup={signup}\r\n                user={user}\r\n                logout={logout}\r\n                isLoggedin={isLoggedin}\r\n                {...this.props}\r\n              />\r\n            );\r\n          }}\r\n        </Consumer>\r\n      );\r\n    }\r\n  };\r\n};\r\n\r\n// Provider\r\nclass AuthProvider extends React.Component {\r\n  state = { isLoggedin: false, user: null, isLoading: true };\r\n\r\n  componentDidMount() {\r\n    // luego de que se monte el componente, llama a auth.me() que nos devuelve el usuario y setea los valores para loguearlo\r\n    auth\r\n      .me()\r\n      .then((user) =>\r\n        this.setState({ isLoggedin: true, user: user, isLoading: false })\r\n      )\r\n      .catch((err) =>\r\n        this.setState({ isLoggedin: false, user: null, isLoading: false })\r\n      );\r\n  }\r\n\r\n  signup = (user) => {\r\n    const { username, password } = user;\r\n\r\n    auth\r\n      .signup({ username, password })\r\n      .then((user) => this.setState({ isLoggedin: true, user }))\r\n      .catch(({ response }) =>\r\n        this.setState({ message: response.data.statusMessage })\r\n      );\r\n  };\r\n\r\n  login = (user) => {\r\n    const { username, password } = user;\r\n\r\n    auth\r\n      .login({ username, password })\r\n      .then((user) => this.setState({ isLoggedin: true, user }))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  logout = () => {\r\n    auth\r\n      .logout()\r\n      .then(() => this.setState({ isLoggedin: false, user: null }))\r\n      .catch((err) => console.log(err));\r\n  };\r\n\r\n  render() {\r\n    // destructuramos isLoading, isLoggedin y user de this.state y login, logout y signup de this\r\n    const { isLoading, isLoggedin, user } = this.state;\r\n    const { login, logout, signup } = this;\r\n\r\n    return isLoading ? (\r\n      // si está loading, devuelve un <div> y sino devuelve un componente <Provider> con un objeto con los valores: { isLoggedin, user, login, logout, signup}\r\n      // el objeto pasado en la prop value estará disponible para todos los componentes <Consumer>\r\n      <div>Loading</div>\r\n    ) : (\r\n      <Provider value={{ isLoggedin, user, login, logout, signup }}>\r\n        {this.props.children}\r\n      </Provider>\r\n    ); /*<Provider> \"value={}\" datos que estarán disponibles para todos los componentes <Consumer> */\r\n  }\r\n}\r\n\r\nexport { Consumer, withAuth }; //  <--\tRECUERDA EXPORTAR  ! ! !\r\n\r\nexport default AuthProvider; //\t<--\tRECUERDA EXPORTAR  ! ! !\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nclass Navbar extends Component {\r\n  render() {\r\n    const { user, logout, isLoggedin } = this.props;\r\n    return (\r\n      <nav className='navbar'>\r\n        <Link to={\"/\"} id='home-btn'>\r\n          <h4>Home</h4>\r\n        </Link>\r\n        {isLoggedin ? (\r\n          <>\r\n            <p className='navbar-user'>username: {user.username}</p>\r\n            <button className='navbar-button' onClick={logout}>\r\n              Logout\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <Link to='/login'>\r\n              <button className='navbar-button'>Login</button>\r\n            </Link>\r\n            <br />\r\n            <Link to='/signup'>\r\n              <button className='navbar-button'>Sign Up</button>\r\n            </Link>\r\n          </>\r\n        )}\r\n      </nav>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Navbar);\r\n","import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nclass Signup extends Component {\r\n  state = { username: \"\", password: \"\" };\r\n\r\n  handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    const { username, password } = this.state;\r\n    //console.log('Signup -> form submit', { username, password });\r\n    this.props.signup({ username, password });\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n    return (\r\n      <div>\r\n        <h1>Sign Up</h1>\r\n\r\n        <form onSubmit={this.handleFormSubmit}>\r\n          <label>Username:</label>\r\n          <input\r\n            type='text'\r\n            name='username'\r\n            value={username}\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <label>Password:</label>\r\n          <input\r\n            type='password'\r\n            name='password'\r\n            value={password}\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <input type='submit' value='Signup' />\r\n        </form>\r\n\r\n        <p>Already have account?</p>\r\n        <Link to={\"/login\"}> Login</Link>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Signup);\r\n","import React, { Component } from \"react\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nclass Login extends Component {\r\n  state = { username: \"\", password: \"\" };\r\n\r\n  handleFormSubmit = (event) => {\r\n    event.preventDefault();\r\n    const { username, password } = this.state;\r\n    //console.log('Login -> form submit', { username, password });\r\n    this.props.login({ username, password });\r\n  };\r\n\r\n  handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    this.setState({ [name]: value });\r\n  };\r\n\r\n  render() {\r\n    const { username, password } = this.state;\r\n\r\n    return (\r\n      <div>\r\n        <h1>Login</h1>\r\n\r\n        <form onSubmit={this.handleFormSubmit}>\r\n          <label>Username:</label>\r\n          <input\r\n            type='text'\r\n            name='username'\r\n            value={username}\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <label>Password:</label>\r\n          <input\r\n            type='password'\r\n            name='password'\r\n            value={password}\r\n            onChange={this.handleChange}\r\n          />\r\n\r\n          <input type='submit' value='Login' />\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Login);\r\n","import React, { Component } from \"react\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\nclass Private extends Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <h1>Welcome {this.props.user.username}</h1>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default withAuth(Private);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\n// El componente <AnonRoute /> recibe como argumento un objecto con las propiedades: component con el valor de un componente (Signup, Login), isLoggedin (viene de withAuth, ya que Signup se exporta como withAuth(Signup), y el resto de las props (si hubiera))\r\n\r\nfunction AnonRoute({ component: Component, isLoggedin, ...rest }) {\r\n  // devuelve un componente <Route /> donde su prop render recibe las props, y si no está logueado, devuelve el componente con sus props (history, etc.), en caso contrario, el componente <Redirect /> redirige a /private\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        !isLoggedin ? <Component {...props} /> : <Redirect to='/private' />\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default withAuth(AnonRoute);\r\n","import React from \"react\";\r\nimport { Route, Redirect } from \"react-router-dom\";\r\nimport { withAuth } from \"../lib/AuthProvider\";\r\n\r\n// El componente <PrivateRoute /> recibe como props un objecto con las propiedades: component con el valor de un componente (Private), isLoggedin (viene de withAuth, ya que Private se exporta como withAuth(Private), y el resto de las props (si hubiera))\r\n\r\nfunction PrivateRoute({ component: Component, isLoggedin, ...rest }) {\r\n  // devuelve un componente <Route /> donde su prop render recibe las props, y si está logueado, devuelve el componente con sus props (history, etc.), en caso contrario, el componente <Redirect /> redirige a /login\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) =>\r\n        isLoggedin ? <Component {...props} /> : <Redirect to='/login' />\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default withAuth(PrivateRoute);\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { Switch } from \"react-router-dom\";\r\nimport AuthProvider from \"./lib/AuthProvider\";\r\n\r\nimport Navbar from \"./components/Navbar\";\r\nimport Signup from \"./pages/Signup\";\r\nimport Login from \"./pages/Login\";\r\nimport Private from \"./pages/Private\";\r\nimport AnonRoute from \"./components/AnonRoute\";\r\nimport PrivateRoute from \"./components/PrivateRoute\";\r\n\r\nclass App extends Component {\r\n  render() {\r\n    return (\r\n      <AuthProvider>\r\n        <div className='container'>\r\n          <Navbar />\r\n\r\n          <Switch>\r\n            <AnonRoute exact path='/signup' component={Signup} />\r\n            <AnonRoute exact path='/login' component={Login} />\r\n            <PrivateRoute exact path='/private' component={Private} />\r\n          </Switch>\r\n        </div>\r\n      </AuthProvider>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n, document.getElementById('root'));\r\n"],"sourceRoot":""}